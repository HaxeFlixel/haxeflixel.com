<!DOCTYPE html>
<html lang="en">

<head>

	<meta charset="utf-8"/>
	<meta http-equiv="content-type" content="text/html; charset=utf-8"/>
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>

	<title>Part XIII: Polish, finishing up, and juice! | HaxeFlixel 2D Game Framework</title>

	<meta name="description" content="HaxeFlixel is a 2D Game framework that lets you create cross-platform games easier with free, open source technology!"/>
	<meta name="keywords" content="gamedev, game development, cross-platform, haxe, flixel"/>
	<meta name="author" content=""/>
	<meta name="viewport" content="width=device-width"/>

	<link rel="shortcut icon" href="/images/favicon.ico">

	<!--[if lt IE 9]>
	<script async src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
	<![endif]-->

	<link  rel="stylesheet" href="/styles/style.css" />

</head>


<body>

<header>
	<nav>

		<div class="navbar navbar-inverse navbar-fixed-top">
			<div class="container">

				<div class="navbar-header">
					<button data-target=".navbar-collapse" data-toggle="collapse" class="navbar-toggle" type="button">
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
					</button>
					<a href="/" class="navbar-brand"><img src="/images/haxeflixel-header.png" alt="HaxeFlixel"></a>
				</div>

				<div class="navbar-collapse collapse">

					<ul class="nav navbar-nav">

						<li >
							<a href="/demos">Demos</a>
						</li>

                        <li class="dropdown" >

                            <a href="/showcase" class="dropdown-toggle" data-toggle="dropdown">Showcase <span class="caret"></span></a>

                            <ul class="dropdown-menu" role="menu">
                                <li>
                                    <a href="/showcase/games">Games</a>
                                </li>
                                <li>
                                    <a href="/showcase/jams">Jams</a>
                                </li>
                            </ul>

                        </li>

						<li >
							<a href="/blog">Blog</a>
						</li>

						<li class='active'>
							<a href="/documentation">Docs</a>
						</li>

						<li>
							<a href="http://api.haxeflixel.com" target="_blank">API</a>
						</li>

						<li >
							<a href="/forum">Forum</a>
						</li>

					</ul>
		
					<form class="navbar-form search-form" role="search" action="http://google.com/search" method="get">
    <div class="form-group">
        <input type="search" name="q" class="form-control" placeholder="Search">
        <input type="hidden" name="q" value="site:http://haxeflixel.com">
    </div>
</form>

				</div>

			</div>

		</div>

	</nav>
</header>

<div class="container container-main">
	<div class="row">

		<div class="col-md-3">
			<div class="doc-nav affix">
				<ul class="nav">



	<li>
		<h4><a href="/documentation/getting-started">Getting Started</a><h4>
	</li>

	



	<li>
		<h4><a href="/documentation/community">Community</a><h4>
	</li>

	



	<li>
		<h4><a href="/documentation/haxeflixel-handbook">HaxeFlixel Handbook</a><h4>
	</li>

	



	<li>
		<h4><a href="/documentation/resources">Resources</a><h4>
	</li>

	



	<li>
		<h4><a href="/documentation/tutorials">Tutorials</a><h4>
	</li>

	
		
			<li class= about="/documentation/tutorials">
				<a href="/documentation/tutorials"> Tutorials </a>
			</li>
		
			<li class= about="/documentation/the-power-of-haxeflixel">
				<a href="/documentation/the-power-of-haxeflixel"> The Power of HaxeFlixel </a>
			</li>
		
			<li class= about="/documentation/part-i-setup">
				<a href="/documentation/part-i-setup"> Part I: Setup </a>
			</li>
		
			<li class= about="/documentation/part-ii-testing">
				<a href="/documentation/part-ii-testing"> Part II: Testing wit ... </a>
			</li>
		
			<li class= about="/documentation/part-iii-groundwork">
				<a href="/documentation/part-iii-groundwork"> Part III: Groundwork </a>
			</li>
		
			<li class= about="/documentation/part-iv-sprites-and-animation">
				<a href="/documentation/part-iv-sprites-and-animation"> Part IV: Sprites and ... </a>
			</li>
		
			<li class= about="/documentation/part-v-tiles-maps-and-collisions">
				<a href="/documentation/part-v-tiles-maps-and-collisions"> Part V: Tiles, Maps, ... </a>
			</li>
		
			<li class= about="/documentation/part-vi-zoom-and-cameras">
				<a href="/documentation/part-vi-zoom-and-cameras"> Part VI: Zoom and Cameras </a>
			</li>
		
			<li class= about="/documentation/part-vii-pickups">
				<a href="/documentation/part-vii-pickups"> Part VII: Pickups </a>
			</li>
		
			<li class= about="/documentation/part-viii-enemies-and-basic-ai">
				<a href="/documentation/part-viii-enemies-and-basic-ai"> Part VIII: Enemies a ... </a>
			</li>
		
			<li class= about="/documentation/part-ix-ui-and-combat">
				<a href="/documentation/part-ix-ui-and-combat"> Part IX: UI and Combat </a>
			</li>
		
			<li class= about="/documentation/part-x-winning-and-losing-and-menus">
				<a href="/documentation/part-x-winning-and-losing-and-menus"> Part X:  Winning and ... </a>
			</li>
		
			<li class= about="/documentation/part-xi-sound-and-music">
				<a href="/documentation/part-xi-sound-and-music"> Part XI: Sound and Music </a>
			</li>
		
			<li class= about="/documentation/part-xii-multiple-platforms">
				<a href="/documentation/part-xii-multiple-platforms"> Part XII: Multiple Platforms </a>
			</li>
		
			<li class=active about="/documentation/part-xiii-polish-finishing-up-and-juice">
				<a href="/documentation/part-xiii-polish-finishing-up-and-juice"> Part XIII: Polish, f ... </a>
			</li>
		
			<li class= about="/documentation/conclusion">
				<a href="/documentation/conclusion"> Conclusion </a>
			</li>
		
	



</ul>
			</div>
		</div>

		<div class="col-md-9 doc-content" role="main">
			<h1 class="title">Part XIII: Polish, finishing up, and juice!</h1>

			
			<a href="https://github.com/HaxeFlixel/flixel-docs/blob/master/documentation/04_tutorials/14-part-xiii-polish-finishing-up-and-juice.html.md" class="btn btn-sm btn-edit" target="_blank"><span class="glyphicon glyphicon-pencil"></span> Edit </a>

			<p>In this section, I&#39;m going to show you a few simple tricks to add some polish and juice to your game. You may have seen me drop a few of these into the code earlier on, but we&#39;ll go through a few places now to talk about them.</p>

<p>First up, there&#39;s a simple effect we can do with our Camera to have it fade in or out. This works nice for transitions between states or screens.
We can add it to each of our states&#39; create function like so (right before super.create()):</p>
<p><pre class="highlight"><code class="actionscript">FlxG.camera.fade(FlxColor.BLACK, <span class="number">.33</span>, <span class="literal">true</span>);</code></pre></p>
<p>Then, if you want to fade out (when switching states), you can do something like this:</p>
<p><pre class="highlight"><code class="actionscript">FlxG.camera.fade(FlxColor.BLACK,<span class="number">.33</span>, <span class="literal">false</span>,<span class="function"><span class="keyword">function</span><span class="params">()</span> {</span>
    FlxG.switchState(<span class="keyword">new</span> PlayState());
});</code></pre></p>
<p>Try adding this logic to all of your states and then see how much of an improvement it gives the flow of your game.</p>

<p>Next, let&#39;s give the player a little feedback whenever they get hurt in combat. We&#39;re going to make the screen shake briefly. So, go into the enemyAttack function in CombatHUD and, right after we call FlxG.camera.flash (another neat little effect you can use in other projects), add:</p>
<p><pre class="highlight"><code class="actionscript">FlxG.camera.shake(<span class="number">0.01</span>, <span class="number">0.2</span>);</code></pre></p>
<p>So, each time the player gets hurt in combat, the screen will flash white, and will shake a little bit for .2 seconds. Try it out!</p>

<p>I know we&#39;ve used tweens a few times already, but lets add one to show the enemy getting hurt in combat. We&#39;re simply going to make a tween that moves the enemy a few pixels to the right, then triggers a second tween to move the enemy back - each one taking .1 seconds to complete. So, in the makeChoice function of CombatHUD, right before we play the hurt sound for the enemy, add:</p>
<p><pre class="highlight"><code class="actionscript">FlxTween.tween(&lt;em&gt;sprEnemy, { x:_sprEnemy.x + <span class="number">4</span> }, <span class="number">.1</span>, { complete: <span class="function"><span class="keyword">function</span><span class="params">(&lt;/em&gt;)</span> {</span>
    FlxTween.tween(_sprEnemy, { x:_sprEnemy.x - <span class="number">4</span> }, <span class="number">.1</span>);
}} );</code></pre></p>
<p>Check out how that looks. Tweens are a very simple and powerful tool to make your game feel more active when used properly.</p>

<p>Next, let&#39;s add a background effect to our CombatHUD to help bring our the combat screen out from the map a little bit. We&#39;re going to copy what&#39;s on the camera&#39;s buffer, desaturate it, and then apply a FlxWaveSprite to give it a wavy effect. HaxeFlixel has several addons, like FlxWaveSprite or FlxGlitchSprite that can be used for a number of effects.</p>
<ol>
    <li>
        <p>Open up the CombatHUD class and add these two objects:</p>
        <p><pre class="highlight"><code class="actionscript"><span class="keyword">private</span> <span class="keyword">var</span> _sprScreen:FlxSprite;
<span class="keyword">private</span> <span class="keyword">var</span> _sprWave:FlxWaveSprite;</code></pre></p>
    </li>
    <li>
        <p>In the constructor, we&#39;ll initialize these two objects (add this before we create our _sprBack):</p>
        <p><pre class="highlight"><code class="actionscript">_sprScreen = <span class="keyword">new</span> FlxSprite().makeGraphic(FlxG.width, FlxG.height, FlxColor.TRANSPARENT);
_sprWave = <span class="keyword">new</span> FlxWaveSprite(_sprScreen, WaveMode.ALL, <span class="number">4</span>, -<span class="number">1</span>, <span class="number">4</span>);
add(_sprWave);</code></pre></p>
        <p>First, we make our _sprScreen, make it the size of the window, and just leave it empty for now. Then we make a FlxWaveSprite, tell it to target our _sprScreen, and set its properties.</p>
    </li>
    <li>
        <p>Next, in initCombat, we want to make our _sprScreen take a copy of whatever is on the camera&#39;s buffer and apply it to itself, and then desaturate the image. Our FlxWaveSprite will always copy whatever is on our _sprScreen every update automatically.</p>
        <p><pre class="highlight"><code class="actionscript">#<span class="keyword">if</span> flash
_sprScreen.pixels.copyPixels(FlxG.camera.buffer, FlxG.camera.buffer.rect, <span class="keyword">new</span> Point());
#<span class="keyword">else</span>
_sprScreen.pixels.draw(FlxG.camera.canvas, <span class="keyword">new</span> Matrix(<span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>));
#end
<span class="keyword">var</span> rc:Float = <span class="number">1</span> / <span class="number">3</span>;
<span class="keyword">var</span> gc:Float = <span class="number">1</span> / <span class="number">2</span>;
<span class="keyword">var</span> bc:Float = <span class="number">1</span> / <span class="number">6</span>;
_sprScreen.pixels.applyFilter(_sprScreen.pixels, _sprScreen.pixels.rect, <span class="keyword">new</span> Point(), <span class="keyword">new</span> ColorMatrixFilter([rc, gc, bc, <span class="number">0</span>, <span class="number">0</span>, rc, gc, bc, <span class="number">0</span>, <span class="number">0</span>, rc, gc, bc, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>]));
_sprScreen.resetFrameBitmapDatas();
_sprScreen.dirty = <span class="literal">true</span>;</code></pre></p>
    </li>
</ol>

<p>That&#39;s all there is to it! Our _sprWaveSprite will fade in and out with the CombatHUD already. Try our the effect to see how it looks!</p>

<p><img src="/images/tutorial/0022.png" /></p>

<p>You might have noticed, while testing the game, that the mouse cursor can get in the way - especially since it&#39;s not needed outside of the menu states. We can remedy this pretty easily.</p>
<p>In the PlayState.create(), add:</p>
<p><pre class="highlight"><code class="actionscript">#<span class="keyword">if</span> !FLX_NO_MOUSE
FlxG.mouse.visible = <span class="literal">false</span>;
#end</code></pre></p>
<p>And be sure to do the reverse (= true) in GameOverState.create() No more pesky mouse cursor when we don&#39;t need it!</p>

<p>There are plenty of other tweaks and tricks you can add to your games. I&#39;ve shown you just a couple. Try playing around with the different addons special effects classes in HaxeFlixel and see what else you can come up with. Take a look at <a href="http://haxeflixel.com/demos/">the demos</a> for more examples.</p>

			<br>
			<hr>

			<ul class="pager">
				

				<li class="previous">
					<a href="/documentation/part-xii-multiple-platforms">< Part XII: Multiple Platforms</a>
				</li>
				


				
				<li class="next">
					<a href="/documentation/conclusion">Conclusion ></a>
				</li>
				
			</ul>


		</div>
	</div>
</div>

<footer>
	<div class="footer-main">
		<div class=" container">

			<div class="footer-social">

				<iframe width="120px" scrolling="0" height="20px" frameborder="0"
						allowtransparency="true"
						src="http://ghbtns.com/github-btn.html?user=HaxeFlixel&amp;repo=flixel&amp;type=watch&amp;count=true&amp;size=small"></iframe>

				<a href="https://twitter.com/haxeflixel" class="twitter-follow-button" data-show-count="true"
				   data-lang="en" data-size="small">Follow @haxeflixel</a>

				<script>!function (d, s, id)
				{
					var js, fjs = d.getElementsByTagName (s)[0];
					if (!d.getElementById (id))
					{
						js = d.createElement (s);
						js.id = id;
						js.src = "//platform.twitter.com/widgets.js";
						fjs.parentNode.insertBefore (js, fjs);
					}
				} (document, "script", "twitter-wjs");</script>

			</div>

			<div class="footer-powered-by">
				<p>HaxeFlixel is powered by</p>
				<a href="http://haxe.org"><img src="/images/haxe.svg" alt="Haxe" title="Haxe"></a>
				+
				<a href="http://openfl.org"><img class="openfl-footer-logo" src="/images/openfl.svg" alt="OpenFL" title="OpenFL"></a>
				+
				<a href="http://flixel.org"><img class="flixel-footer-logo" src="/images/flixel.svg" alt="Flixel" title="Flixel"></a>
			</div>

		</div>
	</div>
</footer>

<script >(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-35511281-1');
ga('send', 'pageview');</script><script defer="defer"  src="//cdnjs.cloudflare.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script><script defer="defer"  src="//cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script><script defer="defer"  src="/vendor/twitter-bootstrap-3/js/dropdown.js"></script><script defer="defer"  src="/vendor/twitter-bootstrap-3/js/transition.js"></script><script defer="defer"  src="/vendor/twitter-bootstrap-3/js/collapse.js"></script>

</body>

</html>

<!doctype html>
<html lang="en">
	
	<head>
		<meta charset="utf-8">
		<meta http-equiv="content-type" content="text/html; charset=utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
		
			
		
		<title> 10 - UI and Combat | HaxeFlixel - 2D Game Engine</title>

		<meta
			name="description"
			content="HaxeFlixel is a 2D Game Engine that lets you create cross-platform games easier with free, open source technology!">

		<meta property="og:title" content=" 10 - UI and Combat | HaxeFlixel - 2D Game Engine">
		<meta
			property="og:description"
			content="HaxeFlixel is a 2D Game Engine that lets you create cross-platform games easier with free, open source technology!">
		<meta property="og:url" content="https://haxeflixel.com/documentation/ui-and-combat/">
		<meta property="og:site_name" content="HaxeFlixel">
		<meta name="theme-color" content="#3b43ff">
		<meta name="generator" content="Eleventy v3.0.0">

		<meta name="viewport" content="width=device-width, initial-scale=1">

		<link rel="icon" href="/images/haxeflixel.svg">
		<link rel="shortcut icon" href="/images/favicon.ico">

		<link rel="stylesheet" href="/styles/style.css">
		<link rel="stylesheet" href="/styles/highlights/vs2015.min.css">

		<script>
			/*!
 * Color mode toggler for Bootstrap's docs (https://getbootstrap.com/)
 * Copyright 2011-2024 The Bootstrap Authors
 * Licensed under the Creative Commons Attribution 3.0 Unported License.
 */

(() => {
  'use strict'

  const getStoredTheme = () => window.localStorage.getItem('theme')
  const setStoredTheme = theme => window.localStorage.setItem('theme', theme)

  const getPreferredTheme = () => {
    const storedTheme = getStoredTheme()
    if (storedTheme) {
      return storedTheme
    }

    return window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light'
  }

  const setTheme = theme => {
    if (theme === 'auto') {
      document.documentElement.setAttribute('data-bs-theme', (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light'))
    } else {
      document.documentElement.setAttribute('data-bs-theme', theme)
    }
  }

  setTheme(getPreferredTheme())

  const showActiveTheme = (theme, focus = false) => {
    const themeSwitcher = document.querySelector('#bd-theme')

    if (!themeSwitcher) {
      return
    }

    const themeSwitcherText = document.querySelector('#bd-theme-text')
    const activeThemeIcon = document.querySelector('.theme-icon-active')
    const btnToActive = document.querySelector(`[data-bs-theme-value="${theme}"]`)
    const svgOfActiveBtn = btnToActive.querySelector('i')

    document.querySelectorAll('[data-bs-theme-value]').forEach(element => {
      element.classList.remove('active')
      element.setAttribute('aria-pressed', 'false')
    })

    btnToActive.classList.add('active')
    btnToActive.setAttribute('aria-pressed', 'true')
    activeThemeIcon.className = svgOfActiveBtn.className + ' theme-icon-active'
    const themeSwitcherLabel = `${themeSwitcherText.textContent} (${btnToActive.dataset.bsThemeValue})`
    themeSwitcher.setAttribute('aria-label', themeSwitcherLabel)

    if (focus) {
      themeSwitcher.focus()
    }
  }

  window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', () => {
    const storedTheme = getStoredTheme()
    if (storedTheme !== 'light' && storedTheme !== 'dark') {
      setTheme(getPreferredTheme())
    }
  })

  window.addEventListener('DOMContentLoaded', () => {
    showActiveTheme(getPreferredTheme())

    document.querySelectorAll('[data-bs-theme-value]')
      .forEach(toggle => {
        toggle.addEventListener('click', () => {
          const theme = toggle.getAttribute('data-bs-theme-value')
          setStoredTheme(theme)
          setTheme(theme)
          showActiveTheme(theme, true)
        })
      })
  })
})()

		</script>
	</head>

	<body>
		<header>
	<nav class="navbar navbar-expand-lg fixed-top">
		<div class="container-md">
			<div class="row gx-6">
				
				
					<a
						class="d-lg-none ms-2 fs-2 col"
						type="button"
						data-bs-toggle="offcanvas"
						data-bs-target="#doc-menu-offcanvas"
						aria-controls="doc-menu-offcanvas"
						><i class="bi-book d-inline-block align-text-top"></i
					></a>
				

				<a href="/" class="navbar-brand fs-3 fw-medium col">
					<img
						src="/images/haxeflixel.svg"
						height="31"
						alt="HaxeFlixel"
						class="align-text-bottom">
					HaxeFlixel
				</a>
			</div>

			<div class="row ms-2 me-2">
				<button
					class="navbar-toggler btn-outline-light col"
					type="button"
					data-bs-toggle="offcanvas"
					data-bs-target="#navbarNavDropdown"
					aria-expanded="false"
					aria-controls="navbarNavDropdown"
					aria-label="Toggle navigation">
					<span class="bi-list"></span>
				</button>
			</div>

			<div class="offcanvas offcanvas-end text-bg-dark" id="navbarNavDropdown">
				<div class="offcanvas-header">
					<h5 class="offcanvas-title" id="offcanvasDarkNavbarLabel">HaxeFlixel.com</h5>
					<button
						type="button"
						class="btn-close btn-close-white"
						data-bs-dismiss="offcanvas"
						aria-label="Close"></button>
				</div>
				<div class="offcanvas-body">
					<ul class="navbar-nav nav-underline d-flex flex-grow-1 align-items-lg-center">
						<li class="nav-item dropdown">
							<a
								href="#"
								class="nav-link dropdown-toggle "
								data-bs-toggle="dropdown"
								role="button"
								aria-expanded="false"
								>Examples
								<span class="caret"></span>
							</a>
							<ul class="dropdown-menu inverse-dropdown">
								<li>
									<a class="dropdown-item" href="/demos">Demos</a>
								</li>
								<li>
									<a class="dropdown-item" href="https://snippets.haxeflixel.com/">
										<i class="bi bi-link-45deg"></i>
										Snippets
									</a>
								</li>
							</ul>
						</li>

						<li class="nav-item">
							<a class="nav-link " href="/showcase">Showcase</a>
						</li>

						
						<li class="nav-item">
							<a class="nav-link " href="/blog">Blog</a>
						</li>

						
						<li class="nav-item">
							<a class="nav-link active" href="/documentation"
								>Docs</a
							>
						</li>

						<li class="nav-item">
							<a class="nav-link" href="http://api.haxeflixel.com">API</a>
						</li>

						
						<li class="nav-item">
							<a class="nav-link" href="https://github.com/HaxeFlixel/flixel/discussions">Forum </a>
						</li>
						<div class="nav-item me-4 h2 col d-inline-flex my-auto">
							<a
								class="nav-link ms-auto"
								href="https://github.com/HaxeFlixel/flixel"
								target="_blank">
								<i class="bi-github"></i>
							</a>
						</div>
					</ul>

					<div class="nav-item dropdown my-auto">
						<button
							class="btn btn-link nav-link px-0 px-lg-2 dropdown-toggle align-items-center"
							type="button"
							data-bs-toggle="dropdown"
							id="bd-theme">
							
							<i class="bi-moon-stars-fill theme-icon-active"></i>
							<span class="d-lg-none" id="bd-theme-text">Toggle theme</span>
						</button>
						<ul class="dropdown-menu dropdown-menu-end" aria-labelledby="bd-theme-text">
							<li>
								<button
									type="button"
									class="dropdown-item d-flex align-items-center"
									data-bs-theme-value="light"
									aria-pressed="false">
									<i class="bi-sun-fill me-2"></i>
									
									Light
									
								</button>
							</li>
							<li>
								<button
									type="button"
									class="dropdown-item d-flex align-items-center"
									data-bs-theme-value="dark"
									aria-pressed="false">
									<i class="bi-moon-stars-fill me-2"></i>

									
									Dark
									
								</button>
							</li>
							<li>
								<button
									type="button"
									class="dropdown-item d-flex align-items-center"
									data-bs-theme-value="auto"
									aria-pressed="false">
									<i class="bi-circle-half me-2"></i>

									
									Auto
									
								</button>
							</li>
						</ul>
					</div>
				</div>

				

				
			</div>
		</div>
	</nav>
</header>


		<div class="container-md container-main rounded-0">
	<div class="row">
	<div class="col-md-3">
		<div class="offcanvas-lg offcanvas-start" data-bs-scroll="true" id="doc-menu-offcanvas">
	<div class="offcanvas-header">
		<h5 class="offcanvas-title" id="offcanvasLabel"><i class="bi-book"></i> Documentation</h5>
		<button
			type="button"
			class="btn-close"
			data-bs-dismiss="offcanvas"
			data-bs-target="#doc-menu-offcanvas"
			aria-label="Close"></button>
	</div>

	<div class="accordion overflow-y-auto " style="max-height:85vh" id="doc-menu-accordion">
		

		
			

			<div class="accordian-item">
				<h2 class="accordion-header sticky-top">
					<button
						data-bs-target="#collapsegetting_started"
						type="button"
						class="accordion-button fw-semibold"
						data-bs-toggle="collapse"
						aria-expanded="false"
						aria-controls="collapsegetting_started">
						Getting Started
					</button>
				</h2>

				<div
					id="collapsegetting_started"
					class="accordion-collapse collapse ">
					<div class="accordion-body p-0">
						<div class="list-group list-group-flush w-100">
							
								<a
									class="list-group-item list-group-item-action fw-normal"
									href="/documentation/getting-started/">
									Getting Started
								</a>
							
								<a
									class="list-group-item list-group-item-action fw-normal"
									href="/documentation/install-haxeflixel/">
									Install HaxeFlixel
								</a>
							
								<a
									class="list-group-item list-group-item-action fw-normal"
									href="/documentation/hello-world/">
									Hello World
								</a>
							
								<a
									class="list-group-item list-group-item-action fw-normal"
									href="/documentation/visual-studio-code/">
									Visual Studio Code
								</a>
							
								<a
									class="list-group-item list-group-item-action fw-normal"
									href="/documentation/where-to-now/">
									Where to now?
								</a>
							
						</div>
					</div>
				</div>
			</div>
		
			

			<div class="accordian-item">
				<h2 class="accordion-header sticky-top">
					<button
						data-bs-target="#collapsetutorial"
						type="button"
						class="accordion-button fw-bold "
						data-bs-toggle="collapse"
						aria-expanded="true"
						aria-controls="collapsetutorial">
						Tutorial
					</button>
				</h2>

				<div
					id="collapsetutorial"
					class="accordion-collapse collapse show">
					<div class="accordion-body p-0">
						<div class="list-group list-group-flush w-100">
							
								<a
									class="list-group-item list-group-item-action fw-normal"
									href="/documentation/tutorial/">
									Tutorial
								</a>
							
								<a
									class="list-group-item list-group-item-action fw-normal"
									href="/documentation/the-power-of-haxeflixel/">
									The Power of HaxeFlixel
								</a>
							
								<a
									class="list-group-item list-group-item-action fw-normal"
									href="/documentation/setup/">
									1 - Setup
								</a>
							
								<a
									class="list-group-item list-group-item-action fw-normal"
									href="/documentation/creating-a-new-project/">
									2 - Creating a new project
								</a>
							
								<a
									class="list-group-item list-group-item-action fw-normal"
									href="/documentation/groundwork/">
									3 - Groundwork
								</a>
							
								<a
									class="list-group-item list-group-item-action fw-normal"
									href="/documentation/sprites-and-animation/">
									4 - Sprites and Animation
								</a>
							
								<a
									class="list-group-item list-group-item-action fw-normal"
									href="/documentation/creating-a-tilemap/">
									5 - Creating a Tilemap
								</a>
							
								<a
									class="list-group-item list-group-item-action fw-normal"
									href="/documentation/loading-the-tilemap/">
									6 - Loading the Tilemap
								</a>
							
								<a
									class="list-group-item list-group-item-action fw-normal"
									href="/documentation/zoom-and-cameras/">
									7 - Zoom and Cameras
								</a>
							
								<a
									class="list-group-item list-group-item-action fw-normal"
									href="/documentation/pickups/">
									8 - Pickups
								</a>
							
								<a
									class="list-group-item list-group-item-action fw-normal"
									href="/documentation/enemies-and-basic-ai/">
									9 - Enemies and Basic AI
								</a>
							
								<a
									class="list-group-item list-group-item-action active fw-bold"
									href="/documentation/ui-and-combat/">
									10 - UI and Combat
								</a>
							
								<a
									class="list-group-item list-group-item-action fw-normal"
									href="/documentation/game-over-menu/">
									11 - Game Over Menu
								</a>
							
								<a
									class="list-group-item list-group-item-action fw-normal"
									href="/documentation/sound-and-music/">
									12 - Sound and Music
								</a>
							
								<a
									class="list-group-item list-group-item-action fw-normal"
									href="/documentation/multiple-platforms/">
									13 - Multiple Platforms
								</a>
							
								<a
									class="list-group-item list-group-item-action fw-normal"
									href="/documentation/polish/">
									14 - Polish
								</a>
							
								<a
									class="list-group-item list-group-item-action fw-normal"
									href="/documentation/conclusion/">
									Conclusion
								</a>
							
						</div>
					</div>
				</div>
			</div>
		
			

			<div class="accordian-item">
				<h2 class="accordion-header sticky-top">
					<button
						data-bs-target="#collapsehandbook"
						type="button"
						class="accordion-button fw-semibold"
						data-bs-toggle="collapse"
						aria-expanded="false"
						aria-controls="collapsehandbook">
						HaxeFlixel Handbook
					</button>
				</h2>

				<div
					id="collapsehandbook"
					class="accordion-collapse collapse ">
					<div class="accordion-body p-0">
						<div class="list-group list-group-flush w-100">
							
								<a
									class="list-group-item list-group-item-action fw-normal"
									href="/documentation/haxeflixel-handbook/">
									HaxeFlixel Handbook
								</a>
							
								<a
									class="list-group-item list-group-item-action fw-normal"
									href="/documentation/flixel-display-list/">
									Flixel Display List
								</a>
							
								<a
									class="list-group-item list-group-item-action fw-normal"
									href="/documentation/flxgroup/">
									FlxGroup
								</a>
							
								<a
									class="list-group-item list-group-item-action fw-normal"
									href="/documentation/flxsprite/">
									FlxSprite
								</a>
							
								<a
									class="list-group-item list-group-item-action fw-normal"
									href="/documentation/flxstate/">
									FlxState
								</a>
							
								<a
									class="list-group-item list-group-item-action fw-normal"
									href="/documentation/flxsave/">
									FlxSave
								</a>
							
								<a
									class="list-group-item list-group-item-action fw-normal"
									href="/documentation/flxtween/">
									FlxTween
								</a>
							
								<a
									class="list-group-item list-group-item-action fw-normal"
									href="/documentation/haxeflixel-conditionals/">
									HaxeFlixel Conditionals
								</a>
							
								<a
									class="list-group-item list-group-item-action fw-normal"
									href="/documentation/haxeflixel-targets/">
									HaxeFlixel Targets
								</a>
							
								<a
									class="list-group-item list-group-item-action fw-normal"
									href="/documentation/desktop-targets/">
									Desktop Targets
								</a>
							
								<a
									class="list-group-item list-group-item-action fw-normal"
									href="/documentation/mobile-targets/">
									Mobile Targets
								</a>
							
								<a
									class="list-group-item list-group-item-action fw-normal"
									href="/documentation/android/">
									Android
								</a>
							
								<a
									class="list-group-item list-group-item-action fw-normal"
									href="/documentation/ios/">
									iOS
								</a>
							
								<a
									class="list-group-item list-group-item-action fw-normal"
									href="/documentation/neko/">
									Neko
								</a>
							
								<a
									class="list-group-item list-group-item-action fw-normal"
									href="/documentation/keyboard/">
									Keyboard
								</a>
							
								<a
									class="list-group-item list-group-item-action fw-normal"
									href="/documentation/mouse/">
									Mouse
								</a>
							
								<a
									class="list-group-item list-group-item-action fw-normal"
									href="/documentation/gamepads/">
									Gamepads
								</a>
							
								<a
									class="list-group-item list-group-item-action fw-normal"
									href="/documentation/actions/">
									Actions
								</a>
							
								<a
									class="list-group-item list-group-item-action fw-normal"
									href="/documentation/troubleshooting/">
									Troubleshooting
								</a>
							
								<a
									class="list-group-item list-group-item-action fw-normal"
									href="/documentation/debugger/">
									Debugger
								</a>
							
								<a
									class="list-group-item list-group-item-action fw-normal"
									href="/documentation/debugger-interaction/">
									Debugger - Interaction
								</a>
							
						</div>
					</div>
				</div>
			</div>
		
			

			<div class="accordian-item">
				<h2 class="accordion-header sticky-top">
					<button
						data-bs-target="#collapseresources"
						type="button"
						class="accordion-button fw-semibold"
						data-bs-toggle="collapse"
						aria-expanded="false"
						aria-controls="collapseresources">
						Resources
					</button>
				</h2>

				<div
					id="collapseresources"
					class="accordion-collapse collapse ">
					<div class="accordion-body p-0">
						<div class="list-group list-group-flush w-100">
							
								<a
									class="list-group-item list-group-item-action fw-normal"
									href="/documentation/resources/">
									Resources
								</a>
							
								<a
									class="list-group-item list-group-item-action fw-normal"
									href="/documentation/cheat-sheet/">
									Cheat Sheet
								</a>
							
								<a
									class="list-group-item list-group-item-action fw-normal"
									href="/documentation/openfl-project-xml-format/">
									XML Project Format
								</a>
							
								<a
									class="list-group-item list-group-item-action fw-normal"
									href="/documentation/game-development-tools/">
									Game Development Tools
								</a>
							
								<a
									class="list-group-item list-group-item-action fw-normal"
									href="/documentation/compiler-conditionals/">
									Compiler Conditionals
								</a>
							
								<a
									class="list-group-item list-group-item-action fw-normal"
									href="/documentation/using-haxelib/">
									Using Haxelib
								</a>
							
								<a
									class="list-group-item list-group-item-action fw-normal"
									href="/documentation/faq/">
									FAQ
								</a>
							
								<a
									class="list-group-item list-group-item-action fw-normal"
									href="/documentation/community-tutorials/">
									Community Tutorials
								</a>
							
						</div>
					</div>
				</div>
			</div>
		
			

			<div class="accordian-item">
				<h2 class="accordion-header sticky-top">
					<button
						data-bs-target="#collapsecommunity"
						type="button"
						class="accordion-button fw-semibold"
						data-bs-toggle="collapse"
						aria-expanded="false"
						aria-controls="collapsecommunity">
						Community
					</button>
				</h2>

				<div
					id="collapsecommunity"
					class="accordion-collapse collapse ">
					<div class="accordion-body p-0">
						<div class="list-group list-group-flush w-100">
							
								<a
									class="list-group-item list-group-item-action fw-normal"
									href="/documentation/community/">
									Community
								</a>
							
								<a
									class="list-group-item list-group-item-action fw-normal"
									href="/documentation/about/">
									About
								</a>
							
								<a
									class="list-group-item list-group-item-action fw-normal"
									href="/documentation/why-haxe/">
									Why a Haxe Version
								</a>
							
								<a
									class="list-group-item list-group-item-action fw-normal"
									href="/documentation/introduction-to-haxe/">
									Introduction to Haxe
								</a>
							
								<a
									class="list-group-item list-group-item-action fw-normal"
									href="/documentation/introduction-to-openfl/">
									Introduction to OpenFL
								</a>
							
								<a
									class="list-group-item list-group-item-action fw-normal"
									href="/documentation/contributing/">
									Contributing
								</a>
							
								<a
									class="list-group-item list-group-item-action fw-normal"
									href="/documentation/code-contributions/">
									Code Contributions
								</a>
							
								<a
									class="list-group-item list-group-item-action fw-normal"
									href="/documentation/code-style/">
									Code Style
								</a>
							
								<a
									class="list-group-item list-group-item-action fw-normal"
									href="/documentation/website-docs/">
									HaxeFlixel Website
								</a>
							
								<a
									class="list-group-item list-group-item-action fw-normal"
									href="/documentation/upgrade-guide-3-x/">
									Upgrade Guide 3.x
								</a>
							
								<a
									class="list-group-item list-group-item-action fw-normal"
									href="/documentation/flixel-addons/">
									Flixel Addons
								</a>
							
								<a
									class="list-group-item list-group-item-action fw-normal"
									href="/documentation/upgrade-guide-4-0-0/">
									Upgrade Guide 4.0.0
								</a>
							
								<a
									class="list-group-item list-group-item-action fw-normal"
									href="/documentation/flixel-tools/">
									Flixel Tools
								</a>
							
								<a
									class="list-group-item list-group-item-action fw-normal"
									href="/documentation/install-development-flixel/">
									Install development Flixel
								</a>
							
						</div>
					</div>
				</div>
			</div>
		
	</div>
</div>

		
	</div>

	<div class="col-lg-9 doc-content" role="main">
		<h1 class="title">10 - UI and Combat</h1>
		<ul class="nav justify-content-end">
			
			<a
				href="https://github.com/HaxeFlixel/flixel-docs/blob/master/documentation/./01_tutorial/11-10-ui-and-combat.html.md/"
				class="nav-link btn-edit"
				target="_blank">
				<i class="bi-pencil"></i>
				Edit</a
			>
		</ul>
		<p>Now we want to show the player what's going on. So we need to have some kind of HUD on the screen to tell them what their current/max health is, and how many coins they have. For the health icon you can use this image <img src="https://raw.githubusercontent.com/HaxeFlixel/flixel-demos/master/Tutorials/TurnBasedRPG/assets/images/health.png" alt="">, or make your own. Make sure you save this in <code>assets/images</code>.</p>
<ol>
<li>
<p>We'll start by making a new <code>HUD</code> class which will hold all our HUD elements:</p>
<pre class="position-relative"><code class="hljs"><span class="hljs-keyword">package</span>;

<span class="hljs-keyword">import</span> flixel.FlxG;
<span class="hljs-keyword">import</span> flixel.FlxSprite;
<span class="hljs-keyword">import</span> flixel.group.FlxGroup.FlxTypedGroup;
<span class="hljs-keyword">import</span> flixel.text.FlxText;
<span class="hljs-keyword">import</span> flixel.util.FlxColor;

<span class="hljs-keyword">using</span> flixel.util.FlxSpriteUtil;

<span class="hljs-title class_"><span class="hljs-keyword">class</span> <span class="hljs-title">HUD</span> <span class="hljs-keyword"><span class="hljs-keyword">extends</span> <span class="hljs-type">FlxTypedGroup</span></span>&lt;<span class="hljs-title">FlxSprite</span>&gt;
</span>{
	<span class="hljs-keyword">var</span> background:<span class="hljs-type">FlxSprite</span>;
	<span class="hljs-keyword">var</span> healthCounter:<span class="hljs-type">FlxText</span>;
	<span class="hljs-keyword">var</span> moneyCounter:<span class="hljs-type">FlxText</span>;
	<span class="hljs-keyword">var</span> healthIcon:<span class="hljs-type">FlxSprite</span>;
	<span class="hljs-keyword">var</span> moneyIcon:<span class="hljs-type">FlxSprite</span>;

	<span class="hljs-keyword">public</span> <span class="hljs-title function_"><span class="hljs-keyword">function</span> <span class="hljs-title">new</span></span>()
	{
		<span class="hljs-keyword">super</span>();
		background = <span class="hljs-keyword">new</span><span class="hljs-type"></span> FlxSprite().makeGraphic(FlxG.width, <span class="hljs-number">20</span>, FlxColor.BLACK);
		background.drawRect(<span class="hljs-number">0</span>, <span class="hljs-number">19</span>, FlxG.width, <span class="hljs-number">1</span>, FlxColor.WHITE);
		healthCounter = <span class="hljs-keyword">new</span><span class="hljs-type"></span> FlxText(<span class="hljs-number">16</span>, <span class="hljs-number">2</span>, <span class="hljs-number">0</span>, <span class="hljs-string">&quot;3 / 3&quot;</span>, <span class="hljs-number">8</span>);
		healthCounter.setBorderStyle(SHADOW, FlxColor.GRAY, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>);
		moneyCounter = <span class="hljs-keyword">new</span><span class="hljs-type"></span> FlxText(<span class="hljs-number">0</span>, <span class="hljs-number">2</span>, <span class="hljs-number">0</span>, <span class="hljs-string">&quot;0&quot;</span>, <span class="hljs-number">8</span>);
		moneyCounter.setBorderStyle(SHADOW, FlxColor.GRAY, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>);
		healthIcon = <span class="hljs-keyword">new</span><span class="hljs-type"></span> FlxSprite(<span class="hljs-number">4</span>, healthCounter.y + (healthCounter.height/<span class="hljs-number">2</span>)  - <span class="hljs-number">4</span>, AssetPaths.health__png);
		moneyIcon = <span class="hljs-keyword">new</span><span class="hljs-type"></span> FlxSprite(FlxG.width - <span class="hljs-number">12</span>, moneyCounter.y + (moneyCounter.height/<span class="hljs-number">2</span>)  - <span class="hljs-number">4</span>, AssetPaths.coin__png);
		moneyCounter.alignment = RIGHT;
		moneyCounter.x = moneyIcon.x - moneyCounter.width - <span class="hljs-number">4</span>;
		add(background);
		add(healthIcon);
		add(moneyIcon);
		add(healthCounter);
		add(moneyCounter);
		forEach(<span class="hljs-title function_"><span class="hljs-keyword">function</span></span>(sprite) sprite.scrollFactor.<span class="hljs-keyword">set</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>));
	}

	<span class="hljs-keyword">public</span> <span class="hljs-title function_"><span class="hljs-keyword">function</span> <span class="hljs-title">updateHUD</span></span>(health:<span class="hljs-type">Int</span>, money:<span class="hljs-type">Int</span>)
	{
		healthCounter.text = health + <span class="hljs-string">&quot; / 3&quot;</span>;
		moneyCounter.text = Std.string(money);
		moneyCounter.x = moneyIcon.x - moneyCounter.width - <span class="hljs-number">4</span>;
	}
}
</code><small class='highlight-language position-absolute top-0 end-0'>HAXE</small></pre>
<p>This class extends <code>FlxTypedGroup&lt;FlxSprite&gt;</code> so that it can hold all of our <code>FlxSprite</code> objects. It is composed of 5 different items: a background (black, with a 1-pixel thick white line along the bottom), 2 <code>FlxText</code> objects: 1 for health, and 1 for money, and two <code>FlxSprite</code> objects, for the icons to go next to the <code>FlxText</code> objects. At the end of our constructor, we have a <code>forEach()</code> call - we use this to iterate through each of the items in this group, and it just sets their <code>scrollFactor.x</code> and <code>scrollFactor.y</code> to 0, meaning, even if the camera scrolls, all of these items will stay at the same position relative to the screen.</p>
<p>Finally, we have a function that we can call from anywhere to tell the <code>HUD</code> what it should display.</p>
</li>
<li>
<p>Now let's get it to work and have it update whenever we pick up a coin. In your <code>PlayState</code>, add this to the top of the class:</p>
<pre class="position-relative"><code class="hljs"><span class="hljs-keyword">var</span> hud:<span class="hljs-type">HUD</span>;
<span class="hljs-keyword">var</span> money:<span class="hljs-type">Int </span>= <span class="hljs-number">0</span>;
<span class="hljs-keyword">var</span> health:<span class="hljs-type">Int </span>= <span class="hljs-number">3</span>;
</code><small class='highlight-language position-absolute top-0 end-0'>HAXE</small></pre>
</li>
<li>
<p>In <code>create()</code>, before <code>super.create()</code>, add:</p>
<pre class="position-relative"><code class="hljs">hud = <span class="hljs-keyword">new</span><span class="hljs-type"></span> HUD();
add(hud);
</code><small class='highlight-language position-absolute top-0 end-0'>HAXE</small></pre>
</li>
<li>
<p>Finally, in the <code>playerTouchCoin()</code> function we added earlier, somewhere inside the <code>if</code>-statement, add:</p>
<pre class="position-relative"><code class="hljs">money++;
hud.updateHUD(health, money);
</code><small class='highlight-language position-absolute top-0 end-0'>HAXE</small></pre>
</li>
</ol>
<p>Go ahead and test out your game, and the HUD should update each time you pick up a coin!</p>
<p><img src="../images/01_tutorial/browser_hud.png" alt=""></p>
<p>If we had a way to 'hurt' the player, we could also update the health on the HUD… but in order to do that, we need to figure out how we're going to do combat!</p>
<p>Let's begin by establishing what we want our combat system to achieve. First, we're not going to be making the next Final Fantasy game here, this is just a basic demonstration to show how a few different elements can work. So, I think all we want to do is have a simple interface that appears when the player touches an enemy that shows the player's health, and the enemy's health (in a health bar, for obfuscation), and gives the player 2 options: <code>FIGHT</code> or <code>FLEE</code>.</p>
<p>If they choose to fight, we'll roll some random chance checks to see if the player hits the enemy, and if the enemy hits the player - a hit will do 1 damage. Once the enemy dies, we'll continue on. If they choose to flee, we'll do a check to see if they do flee or not - if they do, the interface closes and the enemy will be stunned for a few seconds so the player can move away. If they fail to flee, the enemy will get a free hit against the player. We'll also show the damage and misses on the interface.</p>
<p>This all seems simple enough, but it's actually going to require several components working together to make it work. It's the most complicated piece of our game so far.</p>
<ol>
<li>
<p>The first component will be our <code>CombatHUD</code> class. This is a pretty big class - it's going to do most of the heavy lifting with our combat logic. You can see the complete class here:</p>
<p><a href="https://github.com/HaxeFlixel/flixel-demos/blob/master/Tutorials/TurnBasedRPG/source/CombatHUD.hx">CombatHUD.hx</a></p>
<p>Take some time to read through it to see how it works, then add it to your project.</p>
<p>We already have most of the assets used by the <code>CombatHUD</code>, but there is one image file we still need - an arrow the player can use to select a choice. Download it from <a href="https://raw.githubusercontent.com/HaxeFlixel/flixel-demos/master/Tutorials/TurnBasedRPG/assets/images/pointer.png">this link</a> (or make your own), name it <code>pointer.png</code> and add it to the <code>assets/images</code> folder.</p>
<p>The <code>CombatHUD</code> also uses something we haven't discussed yet: <em>sounds</em>. We'll dig in to this more in the Sound and Music section. For now, just download these files and place them in the <code>assets/sounds</code> folder. This will ensure the code compiles.</p>
<ul>
<li>
<p><a href="https://raw.githubusercontent.com/HaxeFlixel/flixel-demos/master/Tutorials/TurnBasedRPG/assets/sounds/combat.wav">combat.wav</a></p>
</li>
<li>
<p><a href="https://raw.githubusercontent.com/HaxeFlixel/flixel-demos/master/Tutorials/TurnBasedRPG/assets/sounds/fled.wav">fled.wav</a></p>
</li>
<li>
<p><a href="https://raw.githubusercontent.com/HaxeFlixel/flixel-demos/master/Tutorials/TurnBasedRPG/assets/sounds/hurt.wav">hurt.wav</a></p>
</li>
<li>
<p><a href="https://raw.githubusercontent.com/HaxeFlixel/flixel-demos/master/Tutorials/TurnBasedRPG/assets/sounds/lose.wav">lose.wav</a></p>
</li>
<li>
<p><a href="https://raw.githubusercontent.com/HaxeFlixel/flixel-demos/master/Tutorials/TurnBasedRPG/assets/sounds/miss.wav">miss.wav</a></p>
</li>
<li>
<p><a href="https://raw.githubusercontent.com/HaxeFlixel/flixel-demos/master/Tutorials/TurnBasedRPG/assets/sounds/select.wav">select.wav</a></p>
</li>
<li>
<p><a href="https://raw.githubusercontent.com/HaxeFlixel/flixel-demos/master/Tutorials/TurnBasedRPG/assets/sounds/win.wav">win.wav</a></p>
</li>
</ul>
</li>
<li>
<p>Now, you will need to add a small function to our <code>Enemy</code> class:</p>
<pre class="position-relative"><code class="hljs"><span class="hljs-keyword">public</span> <span class="hljs-title function_"><span class="hljs-keyword">function</span> <span class="hljs-title">changeType</span></span>(type:<span class="hljs-type">EnemyType</span>)
{
	<span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span>.type != type)
	{
		<span class="hljs-built_in">this</span>.type = type;
		<span class="hljs-keyword">var</span> graphic = <span class="hljs-keyword">if</span> (type == BOSS) AssetPaths.boss__png <span class="hljs-keyword">else</span> AssetPaths.enemy__png;
		loadGraphic(graphic, <span class="hljs-literal">true</span>, <span class="hljs-number">16</span>, <span class="hljs-number">16</span>);
	}
}
</code><small class='highlight-language position-absolute top-0 end-0'>HAXE</small></pre>
</li>
<li>
<p>Next, we need to get our <code>CombatHUD</code> into our <code>PlayState</code>. Add this to the top of the <code>PlayState</code> class:</p>
<pre class="position-relative"><code class="hljs"><span class="hljs-keyword">var</span> inCombat:<span class="hljs-type">Bool </span>= <span class="hljs-literal">false</span>;
<span class="hljs-keyword">var</span> combatHud:<span class="hljs-type">CombatHUD</span>;
</code><small class='highlight-language position-absolute top-0 end-0'>HAXE</small></pre>
</li>
<li>
<p>Move down to <code>create()</code>, and, after we add the HUD, and before we call <code>super.create()</code>, add:</p>
<pre class="position-relative"><code class="hljs">combatHud = <span class="hljs-keyword">new</span><span class="hljs-type"></span> CombatHUD();
add(combatHud);
</code><small class='highlight-language position-absolute top-0 end-0'>HAXE</small></pre>
</li>
<li>
<p>Go down to our <code>update()</code>, and change it so that we're ONLY checking for collisions and overlaps when we're not in combat. Everything after the <code>super.update()</code> should look like this:</p>
<pre class="position-relative"><code class="hljs"><span class="hljs-keyword">if</span> (inCombat)
{
	<span class="hljs-keyword">if</span> (!combatHud.visible)
	{
		health = combatHud.playerHealth;
		hud.updateHUD(health, money);
		<span class="hljs-keyword">if</span> (combatHud.outcome == VICTORY)
		{
			combatHud.enemy.kill();
		}
		<span class="hljs-keyword">else</span>
		{
			combatHud.enemy.flicker();
		}
		inCombat = <span class="hljs-literal">false</span>;
		player.active = <span class="hljs-literal">true</span>;
		enemies.active = <span class="hljs-literal">true</span>;
	}
}
<span class="hljs-keyword">else</span>
{
	FlxG.collide(player, walls);
	FlxG.overlap(player, coins, playerTouchCoin);
	FlxG.collide(enemies, walls);
	enemies.forEachAlive(checkEnemyVision);
	FlxG.overlap(player, enemies, playerTouchEnemy);
}
</code><small class='highlight-language position-absolute top-0 end-0'>HAXE</small></pre>
<p>So, we're adding a check to see if the player touches an enemy. If they do, we'll call a callback to see if we should start combat or not.</p>
<p>If we're in combat, we're simply going to keep checking to see if the combat HUD is still visible - once it becomes invisible, we know that combat has finished, and we can determine the outcome. If the outcome is <code>VICTORY</code> (one of our four enum values), we will kill the enemy, but if the player fled the battle, we will make the enemy flicker, to show that the player is safe from fighting it again for a short amount of time.</p>
</li>
<li>
<p>You may have noticed that our <code>Enemy</code> class does not have a <code>flicker()</code> function. That's because we're going to use one found in the <code>FlxSpriteUtil</code> class. Haxe has a nice feature to help us do so. Add this line at the top of the <code>PlayState</code> file, just after your imports:</p>
<pre class="position-relative"><code class="hljs"><span class="hljs-keyword">using</span> flixel.util.FlxSpriteUtil;
</code><small class='highlight-language position-absolute top-0 end-0'>HAXE</small></pre>
<p>This will allow us to use the APIs in the <code>FlxSpriteUtil</code> class, such as <code>flicker()</code>, which can be used on any <code>FlxObject</code>. For more on how this works, take a look at <a href="https://haxe.org/manual/lf-static-extension.html">the Haxe documentation</a>.</p>
</li>
<li>
<p>Next, let's add the functions to handle the player touching an enemy:</p>
<pre class="position-relative"><code class="hljs"><span class="hljs-title function_"><span class="hljs-keyword">function</span> <span class="hljs-title">playerTouchEnemy</span></span>(player:<span class="hljs-type">Player</span>, enemy:<span class="hljs-type">Enemy</span>)
{
	<span class="hljs-keyword">if</span> (player.alive &amp;&amp; player.exists &amp;&amp; enemy.alive &amp;&amp; enemy.exists &amp;&amp; !enemy.isFlickering())
	{
		startCombat(enemy);
	}
}

<span class="hljs-title function_"><span class="hljs-keyword">function</span> <span class="hljs-title">startCombat</span></span>(enemy:<span class="hljs-type">Enemy</span>)
{
	inCombat = <span class="hljs-literal">true</span>;
	player.active = <span class="hljs-literal">false</span>;
	enemies.active = <span class="hljs-literal">false</span>;
	combatHud.initCombat(health, enemy);
}
</code><small class='highlight-language position-absolute top-0 end-0'>HAXE</small></pre>
<p>All we're doing here is verify that both the player and the enemy are alive and exist, as well as that the enemy is not flickering (flickering enemies are those we've just fled from). If so, we start combat.</p>
<p>The <code>startCombat()</code> function simply sets our <code>inCombat</code> flag (so we know not to do collisions), and sets the player and all the enemies to inactive, so they no longer update.</p>
<p>Finally, we call <code>initCombat()</code> in our <code>CombatHUD</code>, which initializes it and makes it start working.</p>
</li>
<li>
<p>Finally, we want enemies that are flickering to not move - they should act kind of stunned for a second after the enemy flees.</p>
<p>In the <code>Enemy</code> class, under <code>update()</code>, add:</p>
<pre class="position-relative"><code class="hljs"><span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span>.isFlickering())
	<span class="hljs-keyword">return</span>;
</code><small class='highlight-language position-absolute top-0 end-0'>HAXE</small></pre>
<p>At the very top, before doing anything else in that function.</p>
<p>Note that <code>isFlickering()</code> comes from <code>FlxSpriteUtil</code>. So, just like before, you will also need to add the <code>using</code> line at the top of the <code>Enemy</code> class file:</p>
<pre class="position-relative"><code class="hljs"><span class="hljs-keyword">using</span> flixel.util.FlxSpriteUtil;
</code><small class='highlight-language position-absolute top-0 end-0'>HAXE</small></pre>
</li>
</ol>
<p>And that should do it! Test out your game and make sure that it works!</p>
<p><img src="../images/01_tutorial/browser_combat_hud.png" alt=""></p>
<p>Next, we'll cover winning and losing and setting up all our different states.</p>


		<br>
		<hr>

		<ul class="pagination justify-content-center">
			
			

			
				<li class="page-item">
					<a class="page-link" href="/documentation/enemies-and-basic-ai/">Previous: 9 - Enemies and Basic AI</a>
				</li>
			

			
				<li class="page-item float-end">
					<a class="page-link" href="/documentation/game-over-menu/">Next: 11 - Game Over Menu</a>
				</li>
			
		</ul>
	</div>
</div>

<div
	class="progress fixed-bottom"
	role="progressbar"
	aria-label="Basic example"
	aria-valuenow="0"
	aria-valuemin="0"
	aria-valuemax="100">
	<div class="progress-bar scroll-progress" style="transition: none"></div>
</div>

<script>
	function getScrollProgress(element) {
		const scrollTop = Math.max(0, window.scrollY - element.offsetTop);
		const documentHeight = element.offsetHeight - window.innerHeight;
		const scrollProgress = (scrollTop / documentHeight) * 100;
		return scrollProgress;
	}

	let content = document.querySelector('.doc-content');
	let progress = 0;
	const progressBar = document.getElementsByClassName('scroll-progress');
	window.addEventListener('scroll', (_) => {
		progress = getScrollProgress(content);
		progressBar[0].style.width = progress + '%';
	});
</script>

</div>


		<footer class="container-fluid">
	<div id="footer-splash" class="row py-1 align-items-stretch">
	<div id="foot-yellow" class="col text-bg-flixel-yellow"></div>
	<div id="foot-red" class="col text-bg-flixel-red "></div>
	<div id="foot-green" class="col text-bg-flixel-green "></div>
	<div id="foot-blue" class="col text-bg-flixel-dark-blue "></div>
	<div id="foot-light-blue" class="col text-bg-flixel-light-blue"></div>
</div>

<script defer>
	var audio = new Audio('/sounds/flixel.ogg');
	document.getElementById('footer-splash').addEventListener('click', function () {
		if (audio.paused) {
			let times = [0.041, 0.184, 0.334, 0.495, 0.636];
			let footCol = ['foot-green', 'foot-yellow', 'foot-light-blue', 'foot-red', 'foot-blue'];

			for (let i = 0; i < times.length; i++) {
				document.getElementById(footCol[i]).style.opacity = 0;
			}

			setTimeout(function () {
				// code to be executed
				audio.play();
				for (let i = 0; i < times.length; i++) {
					setTimeout(function () {
						// code to be executed
						document.getElementById(footCol[i]).style.opacity = 1;
					}, times[i] * 1000);
				}
			}, 1000);
		}
	});
</script>


	<div class="footer-main py-3 mt-5">
		<div class="container ">
			<div class="footer-social row align-items-center fw-bold justify-content-between">
				<div class="col d-flex flex-column justify-content-center text-center">
					<ul class="list-unstyled">
						<li>
							<a href="https://twitter.com/haxeflixel">
								<i class="bi-twitter"></i>
								Twitter
							</a>
						</li>
						<li>
							<a href="https://github.com/haxeflixel">
								<i class="bi-github"></i>
								GitHub
							</a>
						</li>
						<li>
							<a href="https://discordapp.com/invite/rqEBAgF">
								<i class="bi-discord"></i>
								Discord
							</a>
						</li>
						<li>
							<a href="https://www.patreon.com/haxeflixel">
								<img
									class="footer-patreon"
									src="/images/patreon-logo.svg"
									width="16px">
								Patreon
							</a>
						</li>
					</ul>
				</div>

				<div class="col">
					<a class="fw-normal" href="/">HaxeFlixel.com</a>
					<div class="row row-cols-2">
						<ul class="list-unstyled col">
							<li>
								<a href="/documentation/about/">About</a>
							</li>
							<li>
								<a href="/documentation">Docs</a>
							</li>
							<li>
								<a href="https://api.haxeflixel.com">API</a>
							</li>
						</ul>
						<ul class="list-unstyled col">
							<li>
								<a href="/demos">Demos</a>
							</li>
							<li>
								<a href="/showcase">Showcase</a>
							</li>
							<li>
								<a href="/blog">Blog</a>
								<a class="ms-1" href="/feed.xml"><i class="fw-lighter bi bi-rss"></i></a>
							</li>
						</ul>
					</div>
				</div>

				<div class="footer-powered-by col ">
					<div class="text-center">
						<p class="col my-auto mb-2">HaxeFlixel is powered by</p>
						<div class="flex-row align-items-center d-flex justify-content-center">
							<a class="me-1" href="https://haxe.org"
								><img
									src="/images/haxe.svg"
									alt="Haxe"
									title="Haxe"
							></a>
							<p class="my-auto">+</p>
							<a class="ms-1" href="https://openfl.org"
								><img
									class="openfl-footer-logo"
									src="/images/openfl.svg"
									alt="OpenFL"
									title="OpenFL"
							></a>
							<p class="my-auto ms-1">+</p>
							<a class="ms-n4" href="https://flixel.org"
								><img
									class="flixel-footer-logo"
									src="/images/flixel.svg"
									alt="Flixel"
									title="Flixel"
							></a>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</footer>

		<script
	src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
	integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
	crossorigin="anonymous"></script>

<script async defer src="https://buttons.github.io/buttons.js"></script>

		<script src="/11ty-bundle.js"></script>
	</body>
</html>
